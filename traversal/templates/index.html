<!DOCTYPE html>
<html>
<head>
    <title>BFS & DFS Traversal</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>

    <style>
        body {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: white;
        }
        #graph {
            height: 520px;
            background: black;
            border-radius: 10px;
            border: 2px solid #17a2b8;
        }
    </style>
</head>

<body>
<div class="container mt-4">

    <h2 class="text-center text-warning mb-4">
        Directed Graph Traversal (Server-side BFS & DFS)
    </h2>

    <form method="post" class="card bg-dark p-3">
        {% csrf_token %}
        <label>Edges</label>
        <input type="text" name="edges" class="form-control mb-3"
               placeholder="a b, a c, b d, b e, b f, c g, c h" required>

        <label>Start Node</label>
        <input type="text" name="start" class="form-control mb-3" required>

        <button name="mode" value="bfs" class="btn btn-warning w-100 mb-2">
            Show BFS
        </button>

        <button name="mode" value="dfs" class="btn btn-success w-100">
            Show DFS
        </button>
    </form>

    {% if result %}
    <div class="row mt-4">
        <div class="col-md-8">
            <div id="graph"></div>
        </div>

        <div class="col-md-4">
            <h5 class="text-info text-uppercase">{{ mode }} Traversal</h5>
            <p class="fw-bold text-warning">{{ result }}</p>
        </div>
    </div>
    {% endif %}
</div>

{% if result %}
<script>
    const nodes = new vis.DataSet({{ nodes|safe }});
    const edges = new vis.DataSet(
        {{ edges|safe }}.map(e => ({
            from: e.from,
            to: e.to,
            label: e.label,
            font: {
                size: 24,
                color: "#FFD700",
                background: "black",
                strokeWidth: 4,
                strokeColor: "black",
                align: "top"
            }
        }))
    );

    new vis.Network(
        document.getElementById("graph"),
        { nodes, edges },
        {
            edges: {
                arrows: { to: true },
                smooth: { type: "curvedCW", roundness: 0.25 }
            },
            nodes: {
                color: "#17a2b8",
                font: { color: "white", size: 18 }
            }
        }
    );
</script>
{% endif %}

</body>
</html>
